<!--
 - Copyright (c) 2018. Barrett Business Services, Inc. All Rights Reserved
 - Created by agoganian on 10/15/2018.
 -->
 <aura:component controller="PrcXmodController" implements="flexipage:availableForAllPageTypes" access="global">

		<!-- Attributes -->
		<aura:attribute name="dataRenewalYear" type="sObject"/>
		<aura:attribute name="dataHistory" type="sObject"/>
		<aura:attribute name="dataPublished" type="sObject"/>
		<aura:attribute name="dataRecommended" type="sObject"/>
		<aura:attribute name="columnsRenewalYear" type="List" access="public" />
		<aura:attribute name="columnsHistory" type="List" access="public" />
		<aura:attribute name="columnsPublished" type="List" access="public" />
		<aura:attribute name="columnsRecommended" type="List" access="public" />
		<aura:attribute name="BureauReportUrl" type="String" default=""/>
		<aura:attribute name="BureauReportUrlLabel" type="String" default=""/>
	
		<!-- Pricing Attributes -->
		<aura:handler event="c:FluxContainer_getState" action="{!c.onAppEvent}"/>
		<aura:registerEvent name="setState" type="c:FluxContainer_setState"/>
		<aura:attribute name="containerName" type="String" default="xmod"/>
	
		<!-- Common Attributes -->
		<aura:attribute name="clientId" type="String"/>
		<aura:attribute name="data" type="sObject"/>
		<aura:attribute name="clientPricScenId" type="String"/>
		<aura:attribute name="sObjectType" type="String" required="true" default="PricingXmod__c" access="public" />
		<aura:attribute name="maxRows" type="Integer" default="20" />
		<aura:attribute name="records" type="Object[]" />
		<aura:attribute name="columns" type="List" />
		<aura:attribute name="isLoading" type="Boolean" default="false"/>
		<aura:attribute name="hasPublishedXmod" type="Boolean" default="true"/>
		<aura:attribute name="hasRecommendedXmod" type="Boolean" default="true"/>
		<aura:attribute name="isProspect" type="Boolean" default="false"/>
	
		<!-- Common Handlers -->
		<aura:handler name="init" value="{!this}" action="{!c.init}" />
	
		<!-- Common Libraries -->
		<lightning:notificationsLibrary aura:id="notifLib"/>
		
		<div class="c-container">
			<lightning:layout horizontalAlign="spread">
				<lightning:layoutItem size="3">
					<div class="slds-text-heading_small slds-p-bottom--small slds-p-right--medium">
						<aura:if isTrue="{!v.isProspect}">
							XMOD
						</aura:if>
						<aura:if isTrue="{!!v.isProspect}">
							RENEWAL YEAR XMOD
						</aura:if>
					</div>
					<div style="height: auto">
						<lightning:datatable aura:id="xmodRenewalTable"
								keyField="Id"
								data="{!v.dataRenewalYear}"
								columns="{!v.columnsRenewalYear}"
								onsave="{!c.handleSaveTable}"
								hideCheckboxColumn="true"/>
					</div>
				</lightning:layoutItem>
				<aura:if isTrue="{!!v.isProspect}">
					<lightning:layoutItem size="3">
						<div class="slds-text-heading_small slds-p-bottom--small">
							XMOD HISTORY
						</div>
						<div style="height: auto">
							<lightning:datatable aura:id="xmodHistoryTable"
									keyField="Id"
									data="{! v.dataHistory }"
									columns="{! v.columnsHistory }"
									hideCheckboxColumn="true"/>
						</div>
					</lightning:layoutItem>
					<lightning:layoutItem size="5">
						<aura:if isTrue="{!v.hasRecommendedXmod}">
							<div class="c-container">
								<lightning:layout horizontalAlign="spread" >
									<lightning:layoutItem>
										<div class="slds-text-heading_small slds-p-bottom--small">
											BBSI RECOMMENDED XMOD
										</div>
									</lightning:layoutItem>
								</lightning:layout>
							</div>
							<div style="height: auto">
								<lightning:datatable aura:id="xmodRecommendedTable"
													keyField="Id"
													data="{!v.dataRecommended}"
													columns="{!v.columnsRecommended}"
													hideCheckboxColumn="true"/>
							</div>
							<div class="sls-text-heading_small slds-p-bottom--medium"></div>
						</aura:if>
						<aura:if isTrue="{!v.hasPublishedXmod}">
							<div class="c-container">
								<lightning:layout horizontalAlign="spread" >
									<lightning:layoutItem>
										<div class="slds-text-heading_small slds-p-bottom--small">
											PUBLISHED XMOD
										</div>
									</lightning:layoutItem>
									<lightning:layoutItem >
										<div class="slds-p-bottom--small">
											<lightning:formattedUrl value="{!v.BureauReportUrl}"
																	tooltip="{!v.BureauReportUrl}"
																	label="{!v.BureauReportUrlLabel}"
																	target="_blank"/>
										</div>
									</lightning:layoutItem>
								</lightning:layout>
							</div>
							<div style="height: auto">
								<lightning:datatable aura:id="xmodPublishedTable"
										keyField="Id"
										data="{!v.dataPublished}"
										columns="{!v.columnsPublished}"
										hideCheckboxColumn="true"/>
							</div>
						</aura:if>
					</lightning:layoutItem>
				</aura:if>
			</lightning:layout>
		</div>
	</aura:component>